import{p as L,r as o,u as F,l as v,q as N,s as b,d as t,e as h,j as r,B as w,f as x,S as k,L as A,a as m,k as C,t as E,F as y,A as p,P as D}from"./index.3996ea3a.js";import{T as _,c as I,b as S}from"./Text.d7c5cc0a.js";import{A as B}from"./AppImage.c08ece6e.js";import{S as P}from"./Skeleton.6dbd9952.js";import{S as T,f as $,g as j}from"./friendsPageSelectors.5c7cb189.js";import{S as q}from"./SeoHead.9f3e0582.js";const R="_FriendsPage_xg82n_1",U="_title_xg82n_9",g={FriendsPage:R,title:U},W="_FriendsList_q6st3_1",z="_notFound_q6st3_19",M="_text_q6st3_30",H="_card_q6st3_34",d={FriendsList:W,notFound:z,text:M,card:H},O="_FriendsListItem_ehmtt_1",V="_wrapper_2_ehmtt_7",X="_wrapper_ehmtt_7",G="_date_ehmtt_27",J="_img_ehmtt_47",K="_name_ehmtt_85",Q="_birthday_ehmtt_100",Y="_birthdayData_ehmtt_113",Z="_cake_ehmtt_128",ee="_link_ehmtt_153",u={FriendsListItem:O,wrapper_2:V,wrapper:X,date:G,img:J,name:K,birthday:Q,birthdayData:Y,cake:Z,delete:"_delete_ehmtt_141",link:ee},te=L("deleteFriend",async({userId:c,subscriptionId:a},e)=>{const{extra:s,rejectWithValue:i}=e;try{const n=await s.api.delete(`/subscription/delete/${c}/${a}`);return console.log(n),n.data}catch(n){return console.log(n),i("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435")}}),se=o.exports.memo(c=>{const{className:a,friend:e,userId:s}=c,i=F(),n=v(),l=o.exports.useCallback(async()=>{if(e.id===void 0||s===void 0)return;window.confirm("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0434\u0440\u0443\u0433\u0430?")&&(await i(te({userId:s,subscriptionId:Number(e.id)})),await i(N({idUser:Number(s)})))},[i,e,s]),f=o.exports.useCallback(()=>{n(b(String(e.id)))},[]);return t("div",{className:h(u.FriendsListItem,{},[a]),children:t("div",{children:r("div",{className:u.wrapper,children:[t(B,{fallback:t(P,{width:397,height:300}),src:e.img,className:u.img}),r("div",{className:u.wrapper_2,children:[r("div",{className:u.date,children:[t("a",{onClick:f,className:u.link,children:t(_,{className:u.name,title:e.name})}),r("div",{className:u.birthday,children:[t(T,{className:u.cake}),t("div",{className:u.birthdayData,children:$(e.birthday)})]})]}),t(w,{className:u.delete,theme:x.CLEAR,onClick:l,children:t(k,{})})]})]})})})}),ue=o.exports.memo(c=>{const{className:a,friendsList:e,isLoading:s,userId:i}=c,n=l=>t(se,{friend:l,className:d.card,userId:i},l.id);return!s&&!e.length?t("div",{className:h(d.WishList,{},[a]),children:t("div",{className:d.notFound,children:t(_,{title:"\u0423 \u0432\u0430\u0441 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0434\u0440\u0443\u0437\u0435\u0439 :(",align:I.CENTER,size:S.M,className:d.text})})}):(console.log("FRIENDS  LIST",e),t("div",{className:h(d.FriendsList,{},[a]),children:r("div",{className:d.wrapper,children:[e.length>0?e.map(n):null,s&&t(A,{})]})}))}),le=({className:c})=>{const a=F(),e=m(C);o.exports.useEffect(()=>{a(N({idUser:Number(e==null?void 0:e.id)}))},[a,e==null?void 0:e.id]);const s=m(j),i=m(E.selectAll);return r(y,{children:[t(q,{title:`\u041C\u043E\u0438 \u0434\u0440\u0443\u0437\u044C\u044F \u2014 ${p}`,description:`
                    \u0421\u043F\u0438\u0441\u043E\u043A \u0432\u0430\u0448\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439 \u0432 ${p}. 
                    \u0421\u043C\u043E\u0442\u0440\u0438\u0442\u0435, \u043A\u0442\u043E \u0441 \u0432\u0430\u043C\u0438 \u0432 \u0434\u0440\u0443\u0437\u044C\u044F\u0445, \u0438 \u0437\u0430\u0445\u043E\u0434\u0438\u0442\u0435 \u0432 \u0438\u0445 \u0441\u043F\u0438\u0441\u043A\u0438 \u0436\u0435\u043B\u0430\u043D\u0438\u0439.
                `,url:"https://giftflow.ru/",image:"https://giftflow.ru/images/preview-main.jpg"}),t(D,{children:r("div",{className:g.FriendsPage,children:[t(_,{title:"\u0414\u0440\u0443\u0437\u044C\u044F",className:g.title,titleTag:"h1"}),t(ue,{isLoading:s,friendsList:i,userId:e==null?void 0:e.id})]})})]})};export{le as default};
