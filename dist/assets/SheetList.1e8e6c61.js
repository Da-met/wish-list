import{r as i,p as A,l as R,u as I,a as L,k as S,v as B,C as W,D as v,E as j,d as e,e as w,j as r,F as T,B as h,f as x,w as $,G as F,S as M}from"./index.3996ea3a.js";import{T as N,b as z}from"./Text.d7c5cc0a.js";import{A as U}from"./AppImage.c08ece6e.js";import{S as G,a as V}from"./check.f8f3949b.js";import{I as X}from"./Input.4d1603a8.js";import{S as q}from"./Skeleton.6dbd9952.js";const H="_SheetList_1fp21_1",J="_wrapper_1fp21_7",K="_card_1fp21_17",_={SheetList:H,wrapper:J,card:K},O="_SheetListItem_161x7_2",P="_wrapper_img_161x7_22",Q="_img_161x7_28",Y="_btn_empty_161x7_57",Z="_text_161x7_71",ee="_btn_161x7_57",te="_btnDelete_161x7_95",se="_completed_161x7_111",ae="_isReserved_161x7_116",ne="_wrap_161x7_22",ie="_pin_161x7_125",ce="_name_161x7_160",re="_description_161x7_171",s={SheetListItem:O,wrapper_img:P,img:Q,btn_empty:Y,text:Z,btn:ee,btnDelete:te,completed:se,isReserved:ae,wrap:ne,pin:ie,name:ce,description:re},oe=c=>i.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:32,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...c},i.exports.createElement("polygon",{points:"14 2 18 6 7 17 3 17 3 13 14 2"}),i.exports.createElement("line",{x1:3,y1:22,x2:21,y2:22})),ue=A("deleteFriend",async({listId:c},o)=>{const{extra:a,rejectWithValue:u}=o,d=c;try{const n=await a.api.delete(`/lists/${d}`);return console.log(n),n.data}catch(n){return console.log(n),u("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435")}}),de=i.exports.memo(c=>{const{className:o,list:a,canEdit:u}=c,d=R(),n=I(),l=L(S),[g,m]=i.exports.useState(!1),[p,f]=i.exports.useState(a.name),C=i.exports.useCallback(t=>{d(B(String(t.id)))},[n]),k=t=>r("div",{className:s.wrap,children:[e(U,{src:t.img,className:w(s.img,{[s.completed]:t==null?void 0:t.completed,[s.isReserved]:t==null?void 0:t.isReserved}),onClick:()=>C(t)}),(t==null?void 0:t.completed)&&e("div",{className:s.pin,children:e(G,{})}),!(t!=null&&t.completed)&&(t==null?void 0:t.isReserved)&&e("div",{className:s.pin,children:e(V,{})})]}),b=i.exports.useCallback(async()=>{window.confirm("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043B\u0438\u0441\u0442?"),!(a.id===void 0||l===void 0)&&(await n(ue({listId:a.id})),await n(W({idUser:Number(l.id)})))},[n]),E=i.exports.useCallback(async()=>{if(!p.trim())return;const t=await n(v({id:a.id,name:p.trim()}));v.fulfilled.match(t)&&m(!1)},[n,a.id,p]),y=i.exports.useCallback(async()=>{d(j(),{state:{listId:a.id}})},[a.id,d]),D=Array.isArray(a.wishes)?a.wishes.length:0;return e("div",{className:w(s.SheetListItem,{},[o]),children:e("div",{className:s.wrapper,children:r("a",{className:s.link,children:[r("div",{className:s.text,children:[g?r(T,{children:[e(X,{value:p,onChange:f,className:s.inputRename}),e(h,{onClick:E,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"}),e(h,{theme:x.CLEAR,onClick:()=>m(!1),children:"\u041E\u0442\u043C\u0435\u043D\u0430"})]}):r("div",{className:s.header,children:[e($,{to:F(String(a.id)),children:e(N,{title:a.name,className:s.name,size:z.M})}),e(N,{text:`\u041F\u043E\u0434\u0430\u0440\u043A\u043E\u0432: ${D}`,className:s.description})]}),u&&r("div",{className:s.btn,children:[e(h,{theme:x.CLEAR,onClick:()=>m(!0),children:e(oe,{})}),e(h,{className:s.btnDelete,theme:x.CLEAR,onClick:b,children:e(M,{})})]})]}),r("div",{className:s.wrapper_img,children:[u&&e("div",{className:s.img,children:e("button",{className:s.btn_empty,onClick:y,children:"+"})}),a.wishes.length>0?a.wishes.map(k):""]})]})})})}),me=new Array(3).fill(0).map((c,o)=>e(q,{height:112,className:_.card},o)),we=i.exports.memo(c=>{const{className:o,isLoading:a,myLists:u,ownerId:d}=c,n=L(S),l=(n==null?void 0:n.id)===d,g=m=>e(de,{list:m,className:_.card,canEdit:l});return e("div",{className:w(_.SheetList,{},[o]),children:r("div",{className:_.wrapper,children:[u.length>0?u.map(g):null,a&&me]})})});export{we as S};
