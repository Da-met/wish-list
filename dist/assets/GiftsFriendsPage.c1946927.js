import{r as l,u as F,l as A,v as k,d as e,e as C,j as i,w as E,s as N,B as R,f as x,x as L,y as W,a as g,F as D,A as G,P as b}from"./index.3996ea3a.js";import{T as c,b as p,c as S}from"./Text.d7c5cc0a.js";import{A as w}from"./AppImage.c08ece6e.js";import{S as B}from"./Skeleton.6dbd9952.js";import{A as I}from"./Avatar.b85790fb.js";import{u as P,f as d}from"./unreserveWishThunk.4364bddf.js";import{D as y}from"./DynamicModuleLoader.a88b5f4e.js";import{S as T}from"./SeoHead.9f3e0582.js";const $="_GiftsFriendsPage_8gdti_1",j="_title_8gdti_10",h={GiftsFriendsPage:$,title:j},z="_GiftsFriendsList_7nrg4_1",M="_wrapper_7nrg4_20",U="_notFound_7nrg4_24",H="_wrap_7nrg4_20",O="_pin_7nrg4_32",K="_err_7nrg4_53",f={GiftsFriendsList:z,wrapper:M,notFound:U,wrap:H,pin:O,err:K},V="_GiftsFriendsListItem_kku3g_2",q="_imgWrapper_kku3g_9",J="_img_kku3g_9",Q="_text_kku3g_48",X="_userName_kku3g_64",Y="_userAvatar_kku3g_74",Z="_name_kku3g_78",u4="_user_kku3g_64",e4="_bottom_kku3g_150",s4="_btn_kku3g_167",t4="_btnCancellation_kku3g_171",r={GiftsFriendsListItem:V,imgWrapper:q,img:J,text:Q,userName:X,userAvatar:Y,name:Z,user:u4,bottom:e4,btn:s4,btnCancellation:t4},r4=l.exports.memo(t=>{const{className:u,wish:s}=t,n=F(),a=A(),_=l.exports.useCallback(()=>{a(k(String(s.id)))},[]),o=async()=>{console.log("RRRRRRRRRRR");try{await n(P(s.id)).unwrap()}catch(v){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043D\u044F\u0442\u0438\u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u0430\u0446\u0438\u0438",v),alert("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0435\u0437\u0435\u0440\u0432")}};return e("div",{className:C(r.GiftsFriendsListItem,{},[u]),children:i("div",{className:r.imgWrapper,children:[i("a",{className:r.btn,onClick:_,children:[e(w,{fallback:e(B,{width:397,height:300}),src:s.img,className:r.img}),e("div",{className:r.text,children:e("div",{children:e(c,{title:s.name,className:r.name,size:p.M})})})]}),i("div",{className:r.bottom,children:[i(E,{to:N(String(s==null?void 0:s.user_id)),className:r.user,children:[e(I,{size:40,src:s.user.img,className:r.userAvatar}),e(c,{text:s.user.name,className:r.userName})]}),e(c,{text:"",size:p.S,align:S.RIGHT})]}),e(R,{theme:x.BACKGROUND_INVERTED,className:r.btnCancellation,onClick:o,children:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"})]})})}),m=L({selectId:t=>t.id}),i4=m.getInitialState({isLoading:!1,error:void 0}),a4=W({name:"reservedWishes",initialState:i4,reducers:{},extraReducers:t=>{t.addCase(d.pending,u=>{u.isLoading=!0,u.error=void 0}).addCase(d.fulfilled,(u,s)=>{u.isLoading=!1,m.setAll(u,s.payload),console.log("\u{1F9E0} \u0414\u0430\u043D\u043D\u044B\u0435, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043A\u043B\u0430\u0434\u0451\u043C \u0432 \u0430\u0434\u0430\u043F\u0442\u0435\u0440:",s.payload)}).addCase(d.rejected,(u,s)=>{u.isLoading=!1,u.error=s.payload})}}),{reducer:n4}=a4,{selectAll:o4}=m.getSelectors(t=>t.reservedWishes||m.getInitialState()),c4=t=>{var u;return(u=t.reservedWishes)==null?void 0:u.isLoading},d4=t=>{var u;return(u=t.reservedWishes)==null?void 0:u.error};new Array(9).fill(0).map((t,u)=>"");const l4=l.exports.memo(t=>{const u=F(),s=g(o4),n=g(c4),a=g(d4);return l.exports.useEffect(()=>{u(d())},[u]),e(y,{reducers:{reservedWishes:n4},removeAfterUnmount:!0,children:i("div",{className:f.GiftsFriendsList,children:[n&&e("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."}),a&&e("div",{className:f.err,children:a}),!n&&!a&&s.length===0&&e("div",{children:"\u041F\u043E\u043A\u0430 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043E"}),!n&&!a&&s.length>0&&s.map(o=>e(r4,{wish:o},o.id))]})})}),A4=({className:t})=>i(D,{children:[e(T,{title:`\u041F\u043E\u0434\u0430\u0440\u043A\u0438 \u0434\u0440\u0443\u0437\u044C\u044F\u043C \u2014 ${G}`,description:`
                    \u0421\u043C\u043E\u0442\u0440\u0438\u0442\u0435 \u043F\u043E\u0434\u0430\u0440\u043A\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0432\u044B \u043F\u043B\u0430\u043D\u0438\u0440\u0443\u0435\u0442\u0435 \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u044C \u0441\u0432\u043E\u0438\u043C \u0434\u0440\u0443\u0437\u044C\u044F\u043C. 
                    \u0423\u043F\u0440\u0430\u0432\u043B\u044F\u0439\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435\u043C \u0438 \u0438\u0434\u0435\u044F\u043C\u0438 \u0441\u044E\u0440\u043F\u0440\u0438\u0437\u043E\u0432.
                `,url:"https://giftflow.ru/",image:"https://giftflow.ru/images/preview-main.jpg"}),e(b,{children:i("div",{className:h.GiftsFriendsPage,children:[e(c,{title:"\u041F\u043E\u0434\u0430\u0440\u043A\u0438 \u0434\u0440\u0443\u0437\u044C\u044F\u043C",className:h.title,titleTag:"h1"}),e(l4,{})]})})]});export{A4 as default};
